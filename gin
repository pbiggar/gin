#!/usr/bin/env python

# Read from the status file
import yaml
import gcc

stream = file("ginfile", "r")

ginfile = yaml.load(stream)

# Get a list of files to be built
for target in ginfile:
  struct = ginfile[target]
  name = target
  files = struct["files"]
  libs = struct["libraries"]

  # Build them with gcc
  objs = []
  for f in files:
    objs += [gcc.build_object(f)]

  gcc.link(name, objs, libs)
